# üéØ –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ —Ç–∏–ø–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ API

## –°—Ö–µ–º–∞ —Ä–∞–±–æ—Ç—ã

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                         Frontend App                             ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ                                                                   ‚îÇ
‚îÇ  React Components                                                 ‚îÇ
‚îÇ  ‚îú‚îÄ‚îÄ LoginForm                                                    ‚îÇ
‚îÇ  ‚îú‚îÄ‚îÄ ProfilePage                                                  ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ MemesListWidget                                              ‚îÇ
‚îÇ          ‚îÇ                                                         ‚îÇ
‚îÇ          ‚Üì                                                         ‚îÇ
‚îÇ  React Query Hooks (@/shared/api/hooks.ts)                       ‚îÇ
‚îÇ  ‚îú‚îÄ‚îÄ useLogin() ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê                            ‚îÇ
‚îÇ  ‚îú‚îÄ‚îÄ useUserProfile() ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§                            ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ useMemes() (—á–µ—Ä–µ–∑ legacy)       ‚îÇ                            ‚îÇ
‚îÇ                                       ‚îÇ                            ‚îÇ
‚îÇ                                       ‚Üì                            ‚îÇ
‚îÇ  API Functions Layer                                              ‚îÇ
‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê ‚îÇ
‚îÇ  ‚îÇ Typed API (openapi-fetch)        Legacy API (custom)        ‚îÇ ‚îÇ
‚îÇ  ‚îÇ                                                              ‚îÇ ‚îÇ
‚îÇ  ‚îÇ @/shared/api/auth.ts            @/shared/api/memes.ts       ‚îÇ ‚îÇ
‚îÇ  ‚îÇ - registerUser()                - getMemes()                ‚îÇ ‚îÇ
‚îÇ  ‚îÇ - loginUser()                   - createMeme()              ‚îÇ ‚îÇ
‚îÇ  ‚îÇ                                                              ‚îÇ ‚îÇ
‚îÇ  ‚îÇ @/shared/api/users.ts                                       ‚îÇ ‚îÇ
‚îÇ  ‚îÇ - getUserProfile()                                          ‚îÇ ‚îÇ
‚îÇ  ‚îÇ - updateUserProfile()                                       ‚îÇ ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò ‚îÇ
‚îÇ          ‚îÇ                                ‚îÇ                        ‚îÇ
‚îÇ          ‚îÇ                                ‚îÇ                        ‚îÇ
‚îÇ          ‚Üì                                ‚Üì                        ‚îÇ
‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê        ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê           ‚îÇ
‚îÇ  ‚îÇ typedApiClient    ‚îÇ        ‚îÇ apiClient (legacy)   ‚îÇ           ‚îÇ
‚îÇ  ‚îÇ (openapi-fetch)   ‚îÇ        ‚îÇ                      ‚îÇ           ‚îÇ
‚îÇ  ‚îÇ                   ‚îÇ        ‚îÇ                      ‚îÇ           ‚îÇ
‚îÇ  ‚îÇ base: localhost:  ‚îÇ        ‚îÇ routes —á–µ—Ä–µ–∑ config  ‚îÇ           ‚îÇ
‚îÇ  ‚îÇ       8080        ‚îÇ        ‚îÇ                      ‚îÇ           ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò        ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò           ‚îÇ
‚îÇ          ‚îÇ                                ‚îÇ                        ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
           ‚îÇ                                ‚îÇ
           ‚îÇ                                ‚îÇ
           ‚Üì                                ‚Üì
  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê          ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
  ‚îÇ  REAL BACKEND      ‚îÇ          ‚îÇ   MSW HANDLERS      ‚îÇ
  ‚îÇ  localhost:8080    ‚îÇ          ‚îÇ   (Browser Mock)    ‚îÇ
  ‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§          ‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
  ‚îÇ                    ‚îÇ          ‚îÇ                     ‚îÇ
  ‚îÇ ‚úÖ /auth/login     ‚îÇ          ‚îÇ üé≠ /api/memes      ‚îÇ
  ‚îÇ ‚úÖ /auth/register  ‚îÇ          ‚îÇ üé≠ /api/memes/:id  ‚îÇ
  ‚îÇ ‚úÖ /auth/logout    ‚îÇ          ‚îÇ üé≠ /api/memes/      ‚îÇ
  ‚îÇ ‚úÖ /auth/refresh   ‚îÇ          ‚îÇ    generate         ‚îÇ
  ‚îÇ                    ‚îÇ          ‚îÇ                     ‚îÇ
  ‚îÇ ‚úÖ /users/profile  ‚îÇ          ‚îÇ (Faker.js data)     ‚îÇ
  ‚îÇ ‚úÖ /users/list     ‚îÇ          ‚îÇ                     ‚îÇ
  ‚îÇ ‚úÖ /users/update   ‚îÇ          ‚îÇ                     ‚îÇ
  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò          ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
           ‚Üë                                ‚Üë
           ‚îÇ                                ‚îÇ
           ‚îÇ     OpenAPI Schema             ‚îÇ
           ‚îÇ            ‚Üì                   ‚îÇ
           ‚îÇ    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê      ‚îÇ
           ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚î§ api-schema.d.ts   ‚îÇ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                ‚îÇ (Auto-generated)   ‚îÇ
                ‚îÇ                    ‚îÇ
                ‚îÇ Types:             ‚îÇ
                ‚îÇ - paths            ‚îÇ
                ‚îÇ - components       ‚îÇ
                ‚îÇ - operations       ‚îÇ
                ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

## –ü–æ—Ç–æ–∫–∏ –¥–∞–Ω–Ω—ã—Ö

### Auth/Users (–†–µ–∞–ª—å–Ω—ã–π –±—ç–∫–µ–Ω–¥)

```
Component
   ‚Üì
useLogin() hook
   ‚Üì
loginUser() function (auth.ts)
   ‚Üì
typedApiClient.POST("/auth/login", {...})
   ‚Üì
HTTP Request ‚Üí localhost:8080/auth/login
   ‚Üì
Real Backend Response
   ‚Üì
Typed Response (AuthResponse)
   ‚Üì
React Query Cache Update
   ‚Üì
Component Re-render
```

### Memes (MSW –ú–æ–∫–∏)

```
Component
   ‚Üì
getMemes() function (memes.ts)
   ‚Üì
apiClient.get("/api/memes")
   ‚Üì
HTTP Request
   ‚Üì
MSW Interceptor (handlers.ts)
   ‚Üì
Faker.js Generated Data
   ‚Üì
Mock Response (MemeListResponse)
   ‚Üì
Component Re-render
```

## –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

### config.ts

–û–ø—Ä–µ–¥–µ–ª—è–µ—Ç, –∫–∞–∫–∏–µ —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã —Ä–µ–∞–ª—å–Ω—ã–µ:

```typescript
export const REAL_BACKEND_ENDPOINTS = [
  "/auth/login",
  "/auth/register",
  "/users/profile",
  // ...
]
```

### –õ–æ–≥–∏–∫–∞ –≤—ã–±–æ—Ä–∞

```typescript
function getBaseUrlForEndpoint(path: string): string {
  return isRealBackendEndpoint(path) 
    ? BACKEND_URL       // localhost:8080
    : MOCK_URL          // localhost:3000/api
}
```

## –¢–∏–ø–∏–∑–∞—Ü–∏—è

### –ò—Å—Ç–æ—á–Ω–∏–∫ –∏—Å—Ç–∏–Ω—ã: api-schema.d.ts

```typescript
// –ê–≤—Ç–æ–≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç—Å—è –∏–∑ OpenAPI
export interface paths {
  "/auth/login": {
    post: {
      requestBody: { ... }
      responses: { ... }
    }
  }
}
```

### –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –≤ –∫–æ–¥–µ

```typescript
import type { components } from "./api-schema"

export type User = components["schemas"]["models.User"]
export type LoginRequest = components["schemas"]["services.LoginRequest"]

// TypeScript –∑–Ω–∞–µ—Ç —Å—Ç—Ä—É–∫—Ç—É—Ä—É!
const { data, error } = await typedApiClient.POST("/auth/login", {
  body: {
    username: "john",  // ‚Üê autocomplete
    password: "123"    // ‚Üê type-checked
  }
})

// data –∏–º–µ–µ—Ç —Ç–∏–ø AuthResponse
console.log(data?.user.username)  // ‚Üê autocomplete
```

## –ú–∏–≥—Ä–∞—Ü–∏—è —ç–Ω–¥–ø–æ–∏–Ω—Ç–∞

### 1. –°–µ–π—á–∞—Å (–≤ –º–æ–∫–∞—Ö)

```typescript
// handlers.ts
http.get("/api/memes", async () => {
  return HttpResponse.json(fakeMemes)
})

// memes.ts
export async function getMemes() {
  return apiClient.get("/api/memes")  // ‚Üê –∏–¥—ë—Ç —á–µ—Ä–µ–∑ MSW
}
```

### 2. –ü–æ—Å–ª–µ –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏ –±—ç–∫–µ–Ω–¥–∞

```bash
# –û–±–Ω–æ–≤–ª—è–µ–º —Å—Ö–µ–º—É
npm run generate:api
```

```typescript
// config.ts - –¥–æ–±–∞–≤–ª—è–µ–º —ç–Ω–¥–ø–æ–∏–Ω—Ç
export const REAL_BACKEND_ENDPOINTS = [
  "/auth/login",
  "/memes",      // ‚Üê –¥–æ–±–∞–≤–∏–ª–∏
]

// memes-typed.ts - —Å–æ–∑–¥–∞—ë–º —Ç–∏–ø–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—É—é —Ñ—É–Ω–∫—Ü–∏—é
export async function getMemesList() {
  return typedApiClient.GET("/memes")  // ‚Üê –∏–¥—ë—Ç –Ω–∞ –±—ç–∫–µ–Ω–¥
}

// handlers.ts - —É–¥–∞–ª—è–µ–º –º–æ–∫
// http.get("/api/memes", ...) ‚Üê —É–¥–∞–ª–∏–ª–∏

// components - –æ–±–Ω–æ–≤–ª—è–µ–º –∏–º–ø–æ—Ä—Ç
import { getMemesList } from "@/shared/api/memes-typed"
```

## –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞

1. **–ü–æ—Å—Ç–µ–ø–µ–Ω–Ω–∞—è –º–∏–≥—Ä–∞—Ü–∏—è** ‚Äî –Ω–µ –Ω—É–∂–Ω–æ –∂–¥–∞—Ç—å –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏ –≤—Å–µ–≥–æ –±—ç–∫–µ–Ω–¥–∞
2. **–¢–∏–ø–æ–±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å** ‚Äî –æ—à–∏–±–∫–∏ –Ω–∞ —ç—Ç–∞–ø–µ –∫–æ–º–ø–∏–ª—è—Ü–∏–∏
3. **–ê–≤—Ç–æ–æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ** ‚Äî —Å—Ö–µ–º–∞ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä—É–µ—Ç—Å—è —Å –±—ç–∫–µ–Ω–¥–æ–º
4. **DX** ‚Äî autocomplete –∏ type hints
5. **–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ** ‚Äî –ª–µ–≥–∫–æ –ø–µ—Ä–µ–∫–ª—é—á–∞—Ç—å—Å—è –º–µ–∂–¥—É –º–æ–∫–∞–º–∏ –∏ —Ä–µ–∞–ª—å–Ω—ã–º API

## –ß–µ–∫–ª–∏—Å—Ç –ø–µ—Ä–µ–¥ –∫–æ–º–º–∏—Ç–æ–º

- [ ] `npm run generate:api` –≤—ã–ø–æ–ª–Ω–µ–Ω
- [ ] –ù–µ—Ç –æ—à–∏–±–æ–∫ –∫–æ–º–ø–∏–ª—è—Ü–∏–∏ TypeScript
- [ ] `config.ts` –æ–±–Ω–æ–≤–ª—ë–Ω –¥–ª—è –Ω–æ–≤—ã—Ö —ç–Ω–¥–ø–æ–∏–Ω—Ç–æ–≤
- [ ] –£–¥–∞–ª–µ–Ω—ã –Ω–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ –º–æ–∫–∏ –∏–∑ `handlers.ts`
- [ ] –û–±–Ω–æ–≤–ª–µ–Ω—ã –∏–º–ø–æ—Ä—Ç—ã –≤ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞—Ö
- [ ] –ü—Ä–æ–≤–µ—Ä–µ–Ω–∞ —Ä–∞–±–æ—Ç–∞ –≤ –±—Ä–∞—É–∑–µ—Ä–µ
